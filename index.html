<!DOCTYPE html>
<html>
<body style="margin:0; background:#000; color:#fff; display:flex; justify-content:center; align-items:center; height:100vh;">
    <button id="btn" style="padding:20px; background:red; color:white; border-radius:10px; font-size:24px; cursor:pointer;">点我开启圣诞魔法</button>
    <video id="v" style="position:fixed; bottom:0; right:0; width:100px; opacity:0.5;" autoplay playsinline></video>
    <script src="https://cdn.staticfile.org/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js"></script>
    <script>
        const btn = document.getElementById('btn');
        btn.onclick = async () => {
            btn.innerText = "加载中...请点允许摄像头";
            const scene = new THREE.Scene();
            const camera = new THREE.PerspectiveCamera(75, window.innerWidth/window.innerHeight, 0.1, 1000);
            const renderer = new THREE.WebGLRenderer();
            renderer.setSize(window.innerWidth, window.innerHeight);
            document.body.appendChild(renderer.domElement);
            
            const geo = new THREE.SphereGeometry(1, 32, 32);
            const mat = new THREE.PointsMaterial({color: 0x00ffcc, size: 0.05});
            const p = new THREE.Points(geo, mat);
            scene.add(p);
            camera.position.z = 3;

            const hands = new Hands({locateFile: (f) => `https://cdn.jsdelivr.net/npm/@mediapipe/hands/${f}`});
            hands.onResults(res => { if(res.multiHandLandmarks[0]) p.scale.setScalar(res.multiHandLandmarks[0][8].y * 5); });
            const cam = new Camera(document.getElementById('v'), {onFrame: async () => await hands.send({image: document.getElementById('v')})});
            await cam.start();
            btn.style.display = 'none';
            function anim() { requestAnimationFrame(anim); p.rotation.y += 0.01; renderer.render(scene, camera); }
            anim();
        };
    </script>
</body>
</html>


